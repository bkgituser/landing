---
const { desktpBg } = Astro.props
import { Picture, getImage } from 'astro:assets'

import CloudsImg from 'src/img/clouds.png'

const mobileBg = await getImage({ src: CloudsImg, format: 'png' })
---

<div class={`h-full`}>
	<div class={`absolute h-full w-full`}>
		<div class="w-full overflow-hidden md:h-full">
			<img
				{...mobileBg}
				alt="background"
				class={`mobile-img z-10 m-0 w-full object-contain md:hidden relative`}
				loading="lazy"
			/>
			<div class="mask background-img relative z-20 overflow-hidden">
				<Picture
					src={desktpBg}
					widths={[480, 768, 976, 1050, 1440, 1770]}
					alt="background"
					class={`scale-125 object-[0_100%] relative md:object-cover md:top-[-250px] xl:top-[-370px] md:object-[0_65%]  h-full`}
					loading="lazy"
				/>
			</div>
		</div>
	</div>

	<slot />
</div>
<style>
	.mask {
		position: absolute;
	}
	.mask::after {
		content: '';
		position: absolute;
		height: 40%;
		bottom: 0;
		background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%);
		z-index: 2;
		width: 100%;
		transform: scale(1.25);
	}

	@media (max-width: 768px) {
		.background-img {
			bottom: 8rem;
		}

		.mask {
			position: relative;
		}
		.mask::after {
			background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%);
			bottom: 0rem;
			height: 10%;
		}
	}
	@media (max-width: 480px) and (max-height: 680px) {
		.background-img {
			bottom: 12rem;
		}

		.mask {
			position: relative;
		}
		.mask::after {
			background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%);
			bottom: 0rem;
			height: 10%;
		}
	}

	@media (min-width: 1440px) and (max-height: 650px) {
		img {
			top: -420px;
		}
	}
	/* 
	@media (min-width: 440px) and (max-width: 668px) and (max-height: 800px) {
		.background-img {
		}

		.mask > img {
			transform: none;
		}

		.mask::after {
			height: 10%;
			bottom: calc(16 * 0.78rem);
		}
	} */

	/* 
	@media (min-width: 668px) and (max-width: 768px) and (max-height: 800px) {
		.background-img {
			bottom: 25rem;
		}

		.mask::after {
			bottom: 20rem;
		}
	}
	@media (max-width: 767px) and (min-height: 820px) {
		.background-img {
			bottom: 0px;
		}

		.mask {
			position: relative;
		}
		.mask::after {
			bottom: 0rem;
		}
	}  */

	/* LANDSCAPE */
	@media (max-height: 480px) {
		.mobile-img {
			display: none;
			visibility: hidden;
		}

		.mask::after {
			height: 10%;
			bottom: 0rem;
		}
	}
</style>
