---
import { Image } from 'astro:assets'
const {
	video,
	autoplay = false,
	placeholder,
	id = 'default',
	muted = true,
	preload = 'none'
} = Astro.props
---

<div class="relative h-full min-h-screen">
	<video
		id={id}
		autoplay={autoplay}
		loop
		playsinline
		class="absolute h-full w-full object-cover"
		muted={muted}
		preload={preload}
	>
		<source src={video} type="video/mp4" />
	</video>
	{
		placeholder && (
			<Image
				src={placeholder}
				alt="Video Poster"
				class="absolute h-full w-full object-cover"
				loading="lazy"
				decoding="async"
				id="video-poster"
			/>
		)
	}
	<slot />
</div>
<style>
	video::-webkit-media-controls-start-playback-glyph {
		will-change: opacity;
	}
</style>
